(self.webpackChunkrs_shop=self.webpackChunkrs_shop||[]).push([[306],{1306:(t,o,e)=>{"use strict";e.r(o),e.d(o,{ProductPageModule:()=>Z});var n=e(8583),i=e(6951),c=e(3018),r=e(41),p=e(345),a=e(498),s=e(9541);const g=function(t){return{photo_little_selected:t}};function d(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"div",33),c.NdJ("click",function(){const o=c.CHM(t).index;return c.oxw(3).switchPhoto(o)}),c._UZ(1,"img",23),c.qZA()}if(2&t){const t=o.$implicit,e=o.index,n=c.oxw(3);c.Q6J("ngClass",c.VKq(2,g,e===n.selectedPhotoIndex)),c.xp6(1),c.Q6J("src",t,c.LSH)}}function l(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"div",34),c.NdJ("click",function(){c.CHM(t);const o=c.oxw(3);return o.addToBasket(o.product)}),c._uU(1,"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),c.qZA()}}function u(t,o){1&t&&(c.TgZ(0,"div",35),c._uU(1,"\u0412 \u043a\u043e\u0440\u0437\u0438\u043de"),c.qZA())}function _(t,o){1&t&&(c.TgZ(0,"div",36),c._uU(1,"\u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"),c.qZA())}function h(t,o){1&t&&(c.TgZ(0,"div",37),c._uU(1,"\u041d\u0435\u0442 \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"),c.qZA())}function f(t,o){if(1&t&&(c.ynx(0),c.TgZ(1,"h1",11),c._uU(2),c.qZA(),c.TgZ(3,"div",12),c.TgZ(4,"span",13),c.TgZ(5,"a"),c.TgZ(6,"span",14),c._uU(7,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",15),c.TgZ(9,"div",16),c.TgZ(10,"div",17),c.TgZ(11,"div",18),c.TgZ(12,"div",19),c.TgZ(13,"div",20),c.YNc(14,d,2,4,"div",21),c.qZA(),c.qZA(),c.TgZ(15,"div",22),c._UZ(16,"img",23),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",24),c.TgZ(18,"div",25),c.TgZ(19,"div",26),c._uU(20),c.TgZ(21,"span"),c._uU(22,"\u0440."),c.qZA(),c.qZA(),c.YNc(23,l,2,0,"div",27),c.YNc(24,u,2,0,"div",28),c.qZA(),c.YNc(25,_,2,0,"div",29),c.YNc(26,h,2,0,"div",30),c.qZA(),c.qZA(),c.TgZ(27,"div",31),c.TgZ(28,"h5",32),c._uU(29,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430"),c.qZA(),c.TgZ(30,"p"),c._uU(31),c.qZA(),c.qZA(),c.BQk()),2&t){const t=c.oxw(2);c.xp6(2),c.Oqu(t.product.name),c.xp6(12),c.Q6J("ngForOf",t.product.imageUrls),c.xp6(2),c.Q6J("src",t.product.imageUrls[t.selectedPhotoIndex],c.LSH),c.xp6(4),c.Oqu(t.product.price),c.xp6(3),c.Q6J("ngIf",!t.product.isInCart),c.xp6(1),c.Q6J("ngIf",t.product.isInCart),c.xp6(1),c.Q6J("ngIf",t.product.availableAmount),c.xp6(1),c.Q6J("ngIf",!t.product.availableAmount),c.xp6(5),c.Oqu(t.product.description)}}function x(t,o){if(1&t&&(c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"ul",4),c.TgZ(4,"li",5),c.TgZ(5,"a",6),c._uU(6,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),c.qZA(),c.qZA(),c.TgZ(7,"li",7),c.TgZ(8,"a",8),c._uU(9),c.qZA(),c.qZA(),c.TgZ(10,"li",7),c.TgZ(11,"a",9),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(13,f,32,9,"ng-container",10),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(9),c.Oqu(t.category.name),c.xp6(3),c.Oqu(t.subcategory.name),c.xp6(1),c.Q6J("ngIf",t.product)}}const b=[{path:"",component:(()=>{class t{constructor(t,o,e,n,i){this.activatedRoute=t,this.categoriesHttpService=o,this.goodsHttpService=e,this.cartHttpService=n,this.store=i,this.subscription=t.params.subscribe(t=>{this.currentSubcategory=t.categoryName,this.productId=t.productId})}ngOnInit(){this.categoriesHttpService.getCategories().subscribe(t=>{for(let o=0;o<t.length;o+1){const e=t[o].subCategories.find(t=>t.id===this.currentSubcategory);if(e){this.subcategory=e,this.category=t[o];break}}}),this.goodsHttpService.getProductById(this.productId).subscribe(t=>{this.product=t,this.checkLSCart()}),this.selectedPhotoIndex=0}switchPhoto(t){this.selectedPhotoIndex=t}addToBasket(t){const o=localStorage.getItem("token");this.cartHttpService.addItemToCart(t.id,o).subscribe(()=>{},()=>{this.cartHttpService.addItemToLocalStorage(t.id)}),this.product.isInCart=!0}checkLSCart(){localStorage.getItem("cart")&&JSON.parse(localStorage.getItem("cart")).includes(this.product.id)&&(this.product.isInCart=!0)}}return t.\u0275fac=function(o){return new(o||t)(c.Y36(i.gz),c.Y36(r.V),c.Y36(p.O),c.Y36(a.R),c.Y36(s.yh))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-product-page"]],decls:1,vars:1,consts:[["class","product-page",4,"ngIf"],[1,"product-page"],[1,"wrapper","product-page__wrapper"],[1,"category-path"],[1,"category-path__list"],[1,"category-path__item","item__first"],["href","/","title","\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",1,"category-path__link"],[1,"category-path__item"],["href","/category",1,"category-path__link"],["href","/subcategory",1,"category-path__link"],[4,"ngIf"],[1,"product-page__title"],[1,"product-tools"],[1,"product-tools__item"],[1,"product-tools__title"],[1,"product-wrapper"],[1,"product"],[1,"product-photo"],[1,"product-photo__wrapper"],[1,"product-photo__left-column"],[1,"product-photo__fotorama"],["class","product-photo_little",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"product-photo__right-column"],[3,"src"],[1,"info-block"],[1,"info-block__top"],[1,"price-block"],["class","to-basket-btn",3,"click",4,"ngIf"],["class","to-basket-btn_true",4,"ngIf"],["class","exist-block",4,"ngIf"],["class","exist-block_none",4,"ngIf"],[1,"description-block"],[1,"description-block__title"],[1,"product-photo_little",3,"ngClass","click"],[1,"to-basket-btn",3,"click"],[1,"to-basket-btn_true"],[1,"exist-block"],[1,"exist-block_none"]],template:function(t,o){1&t&&c.YNc(0,x,14,3,"div",0),2&t&&c.Q6J("ngIf",o.category&&o.subcategory)},directives:[n.O5,n.sg,n.mk],styles:[".product-page[_ngcontent-%COMP%]{margin-top:32px}.product-page__wrapper[_ngcontent-%COMP%]{display:block}.category-path[_ngcontent-%COMP%]{list-style:none}.category-path__list[_ngcontent-%COMP%]{list-style:none;display:flex}.category-path__item[_ngcontent-%COMP%]{display:inline-block;padding:0 .5em 0 .75em;background:url(separator.d44ff134e1025ab87eb3.gif) no-repeat 0 100%;line-height:1}.item__first[_ngcontent-%COMP%]{padding-left:0;background:none}.category-path__link[_ngcontent-%COMP%]{font-size:11px;color:#717171}.category-path__link[_ngcontent-%COMP%]:hover{color:#d62761;cursor:pointer}.product-page__title[_ngcontent-%COMP%]{clear:both;padding:18px 0 4px;font-size:30px;font-family:Futura,Trebuchet MS,Arial,sans-serif;margin:0 0 4px}.product-tools[_ngcontent-%COMP%]{line-height:19px;text-align:center}.product-tools__item[_ngcontent-%COMP%]{float:left;margin-right:0;font-size:12px}.product-tools__item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;height:18px;line-height:18px;padding-left:24px;text-decoration:none;background:url(i-rate.cc48d5abc31967e381dd.png) no-repeat 0 0}.product-tools__title[_ngcontent-%COMP%]{color:#0072bc;border-bottom:1px dotted #0072bc80;cursor:pointer;pointer-events:auto}.product-wrapper[_ngcontent-%COMP%]{margin-top:50px;width:100%;display:flex}.product[_ngcontent-%COMP%]{width:70%}.product-photo[_ngcontent-%COMP%]{width:100%}.buy-info[_ngcontent-%COMP%]{width:40%}.product-photo__wrapper[_ngcontent-%COMP%]{overflow:hidden;position:relative;z-index:1;display:flex;margin-bottom:32px}.product-photo__left-column[_ngcontent-%COMP%]{visibility:visible;width:70px;height:404px;overflow:hidden;background-color:#fff;padding-top:5px;text-align:center;min-height:18px;font-size:0;line-height:0}.product-photo__fotorama[_ngcontent-%COMP%]{transition-duration:333ms;transform:translateY(5px)}.product-photo_little[_ngcontent-%COMP%]{width:50px;height:50px;border:1px solid #e6e6e6;padding:2px;display:flex;align-items:center;justify-content:center;margin:0 5px 5px 0;cursor:pointer}.product-photo_little[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px;max-width:50px}.photo_little_selected[_ngcontent-%COMP%]{transition-duration:333ms;transform:translate(0);border-color:#0072bc}.product-photo__right-column[_ngcontent-%COMP%]{width:600px;display:flex;height:470px;align-items:center;justify-content:center;border-bottom:.5px solid grey;margin-left:20px}.product-photo__right-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;max-width:100%;height:auto;max-height:100%}.info-block[_ngcontent-%COMP%]{width:40%}.to-basket-btn_true[_ngcontent-%COMP%]{margin:0 auto 8px;background:#fff;color:#ea1653;border:2px solid #ea1653}.to-basket-btn[_ngcontent-%COMP%], .to-basket-btn_true[_ngcontent-%COMP%]{width:150px;display:block;height:31px;line-height:29px;font-size:12px;font-family:Tahoma,Geneva,sans-serif;text-align:center;text-decoration:none;cursor:pointer;outline:none}.to-basket-btn[_ngcontent-%COMP%]{margin:0 auto 12px;background:#ea1653;color:#fff;border:0}.price-block[_ngcontent-%COMP%]{font-size:30px;line-height:39px;display:inline-block;color:#000}.info-block__top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.exist-block[_ngcontent-%COMP%]{padding-left:24px;background:url(i-item.7ae3c2575b647d0fbe9e.png) no-repeat 0 0;line-height:20px!important;display:block;color:#aa90a5;font-size:15px;margin-top:15px}.description-block[_ngcontent-%COMP%]{max-width:70%;margin-bottom:30px;border-top:1px solid #bc1f6e;padding-right:20%;line-height:15px;font-size:14px;padding-top:32px}.description-block__title[_ngcontent-%COMP%]{padding:0 0 18px 18px;font-size:18px;font-weight:700;margin:0}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.Bz.forChild(b)],i.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,m]]}),t})()}}]);